// Gallery configuration
const galleries = {
    'water-polo': {
        title: 'Waterpolo',
        images: [
            { src: 'img/water-polo/0D8A1895.jpg', alt: 'Waterpolo player in action' },
            { src: 'img/water-polo/0D8A1899.jpg', alt: 'Waterpolo player making a shot' },
            { src: 'img/water-polo/0D8A1956.jpg', alt: 'Waterpolo player swimming' },
            { src: 'img/water-polo/0D8A1973.jpg', alt: 'Waterpolo player defending' },
            { src: 'img/water-polo/0D8A1974.jpg', alt: 'Waterpolo player in motion' },
            { src: 'img/water-polo/0D8A2098.jpg', alt: 'Waterpolo player jumping' },
            { src: 'img/water-polo/0D8A2118.jpg', alt: 'Waterpolo player shooting' },
            { src: 'img/water-polo/0D8A2240.jpg', alt: 'Waterpolo player in action' },
            { src: 'img/water-polo/0D8A2258.jpg', alt: 'Waterpolo player defending' },
            { src: 'img/water-polo/0D8A2320.jpg', alt: 'Waterpolo player making a shot' },
            { src: 'img/water-polo/0D8A2329.jpg', alt: 'Waterpolo player in motion' },
            { src: 'img/water-polo/0D8A2342.jpg', alt: 'Waterpolo player jumping' },
            // New images
            { src: 'img/water-polo/n1.JPG', alt: 'Waterpolo photo n1' },
            { src: 'img/water-polo/n2.JPG', alt: 'Waterpolo photo n2' },
            { src: 'img/water-polo/n3.JPG', alt: 'Waterpolo photo n3' },
            { src: 'img/water-polo/n4.JPG', alt: 'Waterpolo photo n4' },
            { src: 'img/water-polo/n5.JPG', alt: 'Waterpolo photo n5' },
            { src: 'img/water-polo/n6.JPG', alt: 'Waterpolo photo n6' },
            { src: 'img/water-polo/n7.JPG', alt: 'Waterpolo photo n7' },
            { src: 'img/water-polo/n8.JPG', alt: 'Waterpolo photo n8' },
            { src: 'img/water-polo/n9.JPG', alt: 'Waterpolo photo n9' },
            { src: 'img/water-polo/n10.JPG', alt: 'Waterpolo photo n10' },
            { src: 'img/water-polo/n11.JPG', alt: 'Waterpolo photo n11' },
            { src: 'img/water-polo/n12.JPG', alt: 'Waterpolo photo n12' }
        ]
    },
    'football': {
        title: 'Football',
        images: [
            { src: 'img/football/nv.jpg', alt: 'Football photo 1' },
            
            { src: 'img/football/cool2 (1).JPEG', alt: 'Football photo 3' },
            { src: 'img/football/IMG_7728.JPEG', alt: 'Football photo 4' },
            { src: 'img/football/IMG_7729.JPEG', alt: 'Football photo 5' },
            { src: 'img/football/IMG_7731.JPEG', alt: 'Football photo 6' },
            { src: 'img/football/IMG_7736.JPEG', alt: 'Football photo 7' },
            { src: 'img/football/IMG_7734.JPEG', alt: 'Football photo 8' },
            { src: 'img/football/IMG_7739.JPEG', alt: 'Football photo 9' },
            
            { src: 'img/football/cool1.JPEG', alt: 'Football photo 11' },
            { src: 'img/football/IMG_7726.JPEG', alt: 'Football photo 12' },
            { src: 'img/football/IMG_7725.JPEG', alt: 'Football photo 13' },
            { src: 'img/football/IMG_7724.JPEG', alt: 'Football photo 14' },
            { src: 'img/football/0D8A3115.jpg', alt: 'Football photo 15' },
            { src: 'img/football/0D8A3069.jpg', alt: 'Football photo 16' },
            { src: 'img/football/0D8A3030.jpg', alt: 'Football photo 17' },
            { src: 'img/football/0D8A2603.jpg', alt: 'Football photo 18' },
            { src: 'img/football/IMG_3456.jpg', alt: 'Football photo 19' },
            { src: 'img/football/IMG_3480.jpg', alt: 'Football photo 20' },
            { src: 'img/football/IMG_3572.jpg', alt: 'Football photo 21' },
            { src: 'img/football/IMG_3608.jpg', alt: 'Football photo 22' },
            { src: 'img/football/IMG_3666.jpg', alt: 'Football photo 23' },
            { src: 'img/football/IMG_3761.jpg', alt: 'Football photo 24' },
            { src: 'img/football/IMG_3816.jpg', alt: 'Football photo 25' },
            { src: 'img/football/IMG_3836.jpg', alt: 'Football photo 26' },
            { src: 'img/football/IMG_3905.jpg', alt: 'Football photo 27' },
            { src: 'img/football/IMG_8333.jpg', alt: 'Football photo 28' },
            { src: 'img/football/IMG_8325.jpg', alt: 'Football photo 29' },
            { src: 'img/football/IMG_8391.jpg', alt: 'Football photo 30' },
            { src: 'img/football/IMG_8408.jpg', alt: 'Football photo 31' },
            { src: 'img/football/IMG_8403.jpg', alt: 'Football photo 32' },
            { src: 'img/football/IMG_8398.jpg', alt: 'Football photo 33' },
            { src: 'img/football/0D8A5685.jpg', alt: 'Football photo 34' },
            { src: 'img/football/0D8A6244.jpg', alt: 'Football photo 35' },
            { src: 'img/football/0D8A6297.jpg', alt: 'Football photo 36' },
           
            
            { src: 'img/football/0D8A6483.jpg', alt: 'Football photo 39' },
            { src: 'img/football/0D8A6521.jpg', alt: 'Football photo 40' },
            { src: 'img/football/0D8A6515.jpg', alt: 'Football photo 41' },
            { src: 'img/football/n1.jpg', alt: 'Football photo 42' },
            { src: 'img/football/n2.jpg', alt: 'Football photo 43' },
            { src: 'img/football/n3.jpg', alt: 'Football photo 44' },
            { src: 'img/football/n4.jpg', alt: 'Football photo 45' },
            { src: 'img/football/n5.jpg', alt: 'Football photo 46' },
            { src: 'img/football/n6.jpg', alt: 'Football photo 47' },
            { src: 'img/football/n7.jpg', alt: 'Football photo 48' },
            { src: 'img/football/n8.jpg', alt: 'Football photo 49' },
            { src: 'img/football/n9.jpg', alt: 'Football photo 50' },
            { src: 'img/football/n10.jpg', alt: 'Football photo 51' },
            { src: 'img/football/n11.jpg', alt: 'Football photo 52' },
            { src: 'img/football/n12.jpg', alt: 'Football photo 53' },
            { src: 'img/football/n13.jpg', alt: 'Football photo 54' },
            { src: 'img/football/n14.jpg', alt: 'Football photo 55' },
            { src: 'img/football/n15.jpg', alt: 'Football photo 56' },
            { src: 'img/football/n16.jpg', alt: 'Football photo 57' },
            { src: 'img/football/n17.jpg', alt: 'Football photo 58' },
            { src: 'img/football/n18.jpg', alt: 'Football photo 59' },
            { src: 'img/football/n19.jpg', alt: 'Football photo 60' },
            { src: 'img/football/n20.jpg', alt: 'Football photo 61' },
            { src: 'img/football/n21.jpg', alt: 'Football photo 62' },
            { src: 'img/football/n22.jpg', alt: 'Football photo 63' },
            { src: 'img/football/n23.jpg', alt: 'Football photo 64' },
            { src: 'img/football/n24.jpg', alt: 'Football photo 65' },
            { src: 'img/football/n25.jpg', alt: 'Football photo 66' },
            { src: 'img/football/n26.jpg', alt: 'Football photo 67' },
            { src: 'img/football/n27.jpg', alt: 'Football photo 68' },
            { src: 'img/football/n28.jpg', alt: 'Football photo 69' },
            { src: 'img/football/n29.jpg', alt: 'Football photo 70' },
            { src: 'img/football/n30.jpg', alt: 'Football photo 71' },
            { src: 'img/football/n31.jpg', alt: 'Football photo 72' },
            { src: 'img/football/n32.jpg', alt: 'Football photo 73' },
            { src: 'img/football/n33.jpg', alt: 'Football photo 74' },
            { src: 'img/football/n34.jpg', alt: 'Football photo 75' },
            { src: 'img/football/n35.jpg', alt: 'Football photo 76' },
            { src: 'img/football/n36.jpg', alt: 'Football photo 77' },
            { src: 'img/football/n37.jpg', alt: 'Football photo 78' },
            { src: 'img/football/n38.jpg', alt: 'Football photo 79' },
            { src: 'img/football/n39.jpg', alt: 'Football photo 80' }
        ]
    },
    'volleyball': {
        title: 'Volleyball',
        images: [
            { src: 'img/volleyball/IMG_5715.jpg', alt: 'Volleyball photo 1' },
            { src: 'img/volleyball/IMG_5990.jpg', alt: 'Volleyball photo 2' },
            { src: 'img/volleyball/IMG_6002.jpg', alt: 'Volleyball photo 3' },
            { src: 'img/volleyball/IMG_6061.jpg', alt: 'Volleyball photo 4' },
            { src: 'img/volleyball/IMG_6125.jpg', alt: 'Volleyball photo 5' },
            { src: 'img/volleyball/IMG_6699.jpg', alt: 'Volleyball photo 6' },
            { src: 'img/volleyball/IMG_6779.jpg', alt: 'Volleyball photo 7' },
            { src: 'img/volleyball/IMG_6798.jpg', alt: 'Volleyball photo 8' },
            { src: 'img/volleyball/IMG_6920.jpg', alt: 'Volleyball photo 9' },
            { src: 'img/volleyball/IMG_6932.jpg', alt: 'Volleyball photo 10' },
            { src: 'img/volleyball/IMG_6960.jpg', alt: 'Volleyball photo 11' },
            { src: 'img/volleyball/IMG_7069.jpg', alt: 'Volleyball photo 12' },
            { src: 'img/volleyball/IMG_7049.jpg', alt: 'Volleyball photo 13' },
            { src: 'img/volleyball/n1.jpg', alt: 'Volleyball photo 14' },
            { src: 'img/volleyball/n2.jpg', alt: 'Volleyball photo 15' },
            { src: 'img/volleyball/n3.jpg', alt: 'Volleyball photo 16' }
        ]
    },
    'soccer': {
        title: 'Soccer',
        images: [
            { src: 'img/soccer/_MG_9996.jpg', alt: 'Soccer photo 1' },
            { src: 'img/soccer/_MG_0727.jpg', alt: 'Soccer photo 2' },
            { src: 'img/soccer/_MG_0736.jpg', alt: 'Soccer photo 3' },
            { src: 'img/soccer/_MG_0620.jpg', alt: 'Soccer photo 4' },
            { src: 'img/soccer/_MG_0298.jpg', alt: 'Soccer photo 5' },
            { src: 'img/soccer/_MG_0266.jpg', alt: 'Soccer photo 6' },
            { src: 'img/soccer/_MG_0197.jpg', alt: 'Soccer photo 7' },
            { src: 'img/soccer/_MG_0125.jpg', alt: 'Soccer photo 8' },
            { src: 'img/soccer/_MG_0057.jpg', alt: 'Soccer photo 9' },
            { src: 'img/soccer/_MG_0033.jpg', alt: 'Soccer photo 10' },
            { src: 'img/soccer/_MG_0008.jpg', alt: 'Soccer photo 11' },
            { src: 'img/soccer/_MG_9811.jpg', alt: 'Soccer photo 12' },
            { src: 'img/soccer/_MG_9789.jpg', alt: 'Soccer photo 13' },
            { src: 'img/soccer/_MG_9758.jpg', alt: 'Soccer photo 14' },
            { src: 'img/soccer/_MG_9741.jpg', alt: 'Soccer photo 15' },
            { src: 'img/soccer/IMG_9653.jpg', alt: 'Soccer photo 16' },
            { src: 'img/soccer/IMG_9648.jpg', alt: 'Soccer photo 17' },
            { src: 'img/soccer/n1.jpg', alt: 'Soccer photo 18' },
            { src: 'img/soccer/n2.jpg', alt: 'Soccer photo 19' },
            { src: 'img/soccer/n3.jpg', alt: 'Soccer photo 20' },
            { src: 'img/soccer/n4.jpg', alt: 'Soccer photo 21' },
            { src: 'img/soccer/n5.jpg', alt: 'Soccer photo 22' },
            { src: 'img/soccer/n6.jpg', alt: 'Soccer photo 23' },
            { src: 'img/soccer/n7.jpg', alt: 'Soccer photo 24' },
            { src: 'img/soccer/n8.jpg', alt: 'Soccer photo 25' },
            { src: 'img/soccer/n9.jpg', alt: 'Soccer photo 26' },
            { src: 'img/soccer/n10.jpg', alt: 'Soccer photo 27' },
            { src: 'img/soccer/n11.jpg', alt: 'Soccer photo 28' }
        ]
    },
    
    'lacrosse': {
        title: 'Lacrosse',
        images: [
            { src: 'img/lax/lv.jpg', alt: 'Lacrosse photo 1' },
            { src: 'img/lax/0D8A3277.jpg', alt: 'Lacrosse photo 2' },
            { src: 'img/lax/0D8A3371.jpg', alt: 'Lacrosse photo 3' },
            { src: 'img/lax/0D8A3408.jpg', alt: 'Lacrosse photo 4' },
            { src: 'img/lax/0D8A3514.jpg', alt: 'Lacrosse photo 5' },
            { src: 'img/lax/0D8A3538.jpg', alt: 'Lacrosse photo 6' },
            { src: 'img/lax/0D8A3555.jpg', alt: 'Lacrosse photo 7' },
            { src: 'img/lax/0D8A3580.jpg', alt: 'Lacrosse photo 8' },
            { src: 'img/lax/0D8A3626.jpg', alt: 'Lacrosse photo 9' },
            { src: 'img/lax/0D8A3730.jpg', alt: 'Lacrosse photo 10' },
            { src: 'img/lax/0D8A3829.jpg', alt: 'Lacrosse photo 11' },
            { src: 'img/lax/0D8A3868.jpg', alt: 'Lacrosse photo 12' },
            { src: 'img/lax/0D8A3991.jpg', alt: 'Lacrosse photo 13' },
            { src: 'img/lax/n1.jpg', alt: 'Lacrosse photo 14' },
            { src: 'img/lax/n2.jpg', alt: 'Lacrosse photo 15' },
            { src: 'img/lax/n3.jpg', alt: 'Lacrosse photo 16' },
            { src: 'img/lax/n4.jpg', alt: 'Lacrosse photo 17' },
            { src: 'img/lax/n5.jpg', alt: 'Lacrosse photo 18' },
            { src: 'img/lax/n6.jpg', alt: 'Lacrosse photo 19' },
            { src: 'img/lax/n7.jpg', alt: 'Lacrosse photo 20' },
            { src: 'img/lax/n8.jpg', alt: 'Lacrosse photo 21' },
            { src: 'img/lax/n9.jpg', alt: 'Lacrosse photo 22' },
            { src: 'img/lax/n10.jpg', alt: 'Lacrosse photo 23' },
            { src: 'img/lax/n11.jpg', alt: 'Lacrosse photo 24' },
            { src: 'img/lax/n12.jpg', alt: 'Lacrosse photo 25' },
            { src: 'img/lax/n13.jpg', alt: 'Lacrosse photo 26' },
            { src: 'img/lax/n14.jpg', alt: 'Lacrosse photo 27' },
            { src: 'img/lax/n15.jpg', alt: 'Lacrosse photo 28' },
            { src: 'img/lax/n16.jpg', alt: 'Lacrosse photo 29' },
            { src: 'img/lax/n17.jpg', alt: 'Lacrosse photo 30' },
            { src: 'img/lax/n18.jpg', alt: 'Lacrosse photo 31' },
            { src: 'img/lax/n19.jpg', alt: 'Lacrosse photo 32' },
            { src: 'img/lax/n20.jpg', alt: 'Lacrosse photo 33' },
            { src: 'img/lax/n21.jpg', alt: 'Lacrosse photo 34' },
            { src: 'img/lax/n22.jpg', alt: 'Lacrosse photo 35' },
            { src: 'img/lax/n23.jpg', alt: 'Lacrosse photo 36' },
            { src: 'img/lax/n24.jpg', alt: 'Lacrosse photo 37' },
            { src: 'img/lax/n25.jpg', alt: 'Lacrosse photo 38' },
            { src: 'img/lax/n26.jpg', alt: 'Lacrosse photo 39' },
            { src: 'img/lax/n27.jpg', alt: 'Lacrosse photo 40' }
        ]
    },
    'basketball': {
        title: 'Basketball',
        images: [
            { src: 'img/basketball/0D8A5119.jpg', alt: 'Basketball photo 1' },
            { src: 'img/basketball/0D8A5050.jpg', alt: 'Basketball photo 2' },
            { src: 'img/basketball/0D8A4945.jpg', alt: 'Basketball photo 3' },
            { src: 'img/basketball/0D8A4208.jpg', alt: 'Basketball photo 4' }
        ]
    },
    'nature': {
        title: 'Nature',
        images: [
            
            
           
            
            { src: 'img/nature/IMG_7848.JPEG', alt: 'Nature photo 5' },
            { src: 'img/nature/IMG_7719.JPEG', alt: 'Nature photo 6' },
            { src: 'img/nature/IMG_7717.JPEG', alt: 'Nature photo 7' },
            { src: 'img/nature/IMG_7716.JPEG', alt: 'Nature photo 8' },
            { src: 'img/nature/IMG_7714.JPEG', alt: 'Nature photo 9' },
            { src: 'img/nature/IMG_7718.JPEG', alt: 'Nature photo 10' },
            { src: 'img/nature/IMG_7712.JPEG', alt: 'Nature photo 11' },
            { src: 'img/nature/IMG_7710.JPEG', alt: 'Nature photo 12' },
            { src: 'img/nature/IMG_7709.JPEG', alt: 'Nature photo 13' }
        ]
    }
};

// Get current gallery from URL
function getCurrentGallery() {
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category');
    return category || 'water-polo'; // Default to water-polo if no category specified
}

// Get next gallery in sequence
function getNextGallery(currentGallery) {
    const galleryNames = Object.keys(galleries);
    const currentIndex = galleryNames.indexOf(currentGallery);
    const nextIndex = (currentIndex + 1) % galleryNames.length;
    return galleryNames[nextIndex];
}

// Load gallery content
function loadGallery(galleryName) {
    const gallery = galleries[galleryName];
    if (!gallery) {
        console.error(`Gallery not found: ${galleryName}`);
        return;
    }

    // Update title
    document.getElementById('galleryTitle').textContent = gallery.title;

    // Update next gallery button
    const nextGallery = getNextGallery(galleryName);
    const nextBtn = document.getElementById('nextGalleryBtn');
    if (nextBtn) { // Check if the element exists
      nextBtn.href = `gallery.html?category=${nextGallery}`;
    }


    // Set hero background image - use the first image of the gallery
    const heroSection = document.querySelector('.gallery-hero');
     if (heroSection && gallery.images && gallery.images.length > 0) {
        heroSection.style.backgroundImage = `url(${gallery.images[0].src})`;
        // Also update the header background initially to match the hero
         const header = document.querySelector('.top-nav');
         if (header) {
             header.style.backgroundColor = 'transparent'; // Start transparent on gallery page
             header.style.backdropFilter = 'none';
             header.style.webkitBackdropFilter = 'none';
         }
    }


    // Load images into the grid
    const container = document.getElementById('galleryContainer');
    if (!container) {
        console.error('Gallery container not found');
        return;
    }
    container.innerHTML = ''; // Clear existing content

    gallery.images.forEach((image, index) => {
        const imgWrapper = document.createElement('div');
        imgWrapper.className = 'gallery-item';

        const img = document.createElement('img');
        img.src = image.src;
        img.alt = image.alt;
        img.loading = 'lazy'; // Enable lazy loading
        img.dataset.index = index; // Store index for lightbox navigation

        imgWrapper.appendChild(img);
        container.appendChild(imgWrapper);

        // Add click listener to open lightbox
        imgWrapper.addEventListener('click', () => {
            openLightbox(img);
        });
    });
}

// Lightbox functionality
let currentImageIndex = 0;
let currentGalleryImages = [];

function openLightbox(imageElement) {
    console.log('openLightbox called with:', imageElement);
    
    // Get fresh references to the lightbox elements
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const closeBtn = document.querySelector('.lightbox .close-btn');
    const prevBtn = document.querySelector('.lightbox .prev');
    const nextBtn = document.querySelector('.lightbox .next');

    if (lightbox && lightboxImg) {
        console.log('Lightbox elements found, opening...');
        lightbox.style.display = 'block';
        lightboxImg.src = imageElement.src;
        currentImageIndex = parseInt(imageElement.dataset.index);

        // Get the current gallery images for navigation
        const currentGalleryName = getCurrentGallery();
        currentGalleryImages = galleries[currentGalleryName].images;

        // Add event listeners for navigation
        if (closeBtn) {
            closeBtn.onclick = closeLightbox;
        }
        if (prevBtn) {
            prevBtn.onclick = () => plusSlides(-1);
        }
        if (nextBtn) {
            nextBtn.onclick = () => plusSlides(1);
        }

        updateLightboxNavigation();
    } else {
        console.error('Lightbox elements not found:', { lightbox, lightboxImg });
    }
}

function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    if (lightbox) {
        lightbox.style.display = 'none';
    }
}

function plusSlides(n) {
    showSlides(currentImageIndex += n);
}

function showSlides(n) {
    const lightboxImg = document.getElementById('lightboxImg');
    if (!lightboxImg || !currentGalleryImages || currentGalleryImages.length === 0) {
        console.error('Lightbox elements or images not ready');
        return;
    }

    if (n >= currentGalleryImages.length) { currentImageIndex = 0; }
    if (n < 0) { currentImageIndex = currentGalleryImages.length - 1; }
    lightboxImg.src = currentGalleryImages[currentImageIndex].src;
}

function updateLightboxNavigation() {
    // For looping gallery, no change needed here
}

// Add click listener to lightbox background to close
document.addEventListener('DOMContentLoaded', () => {
    const lightbox = document.getElementById('lightbox');
    if (lightbox) {
        lightbox.addEventListener('click', (event) => {
            if (event.target === lightbox) {
                closeLightbox();
            }
        });
    }
});

// Keyboard navigation
document.addEventListener('keydown', (event) => {
    const lightbox = document.getElementById('lightbox');
    if (lightbox && lightbox.style.display === 'block') {
        if (event.key === 'ArrowLeft') {
            plusSlides(-1);
        } else if (event.key === 'ArrowRight') {
            plusSlides(1);
        } else if (event.key === 'Escape') {
            closeLightbox();
        }
    }
});

// Initialize gallery
document.addEventListener('DOMContentLoaded', () => {
    const currentGallery = getCurrentGallery();
    loadGallery(currentGallery);

    // Add scroll listener for header transparency only on the gallery page
    const isGalleryPage = document.body.classList.contains('gallery-page');
    if (isGalleryPage) {
         window.addEventListener('scroll', () => {
            const heroSection = document.querySelector('.gallery-hero');
            const header = document.querySelector('.top-nav');
            if (heroSection && header) {
                const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
                if (window.scrollY > heroBottom - header.offsetHeight) {
                     // Scrolled past the hero, apply translucent white background
                     header.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
                     header.style.backdropFilter = 'blur(10px)';
                     header.style.webkitBackdropFilter = 'blur(10px)';
                     header.style.color = '#333'; // Darken text for white background
                     header.querySelectorAll('.nav-link, .menu-btn').forEach(el => el.style.color = '#333');
                } else {
                    // Within the hero, keep header transparent
                    header.style.backgroundColor = 'transparent';
                    header.style.backdropFilter = 'none';
                    header.style.webkitBackdropFilter = 'none';
                     header.style.color = 'white'; // White text for transparent background
                     header.querySelectorAll('.nav-link, .menu-btn').forEach(el => el.style.color = 'white');
                }
            }
        });
    }
}); 